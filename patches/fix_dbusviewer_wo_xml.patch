diff --git a/src/qdbus/CMakeLists.txt b/src/qdbus/CMakeLists.txt
index 5504a4ca9..25a17925a 100644
--- a/src/qdbus/CMakeLists.txt
+++ b/src/qdbus/CMakeLists.txt
@@ -7,6 +7,6 @@ endif()
 if(QT_FEATURE_dom)
     add_subdirectory(qdbus)
 endif()
-if(QT_FEATURE_dialogbuttonbox AND QT_FEATURE_inputdialog AND QT_FEATURE_menu AND QT_FEATURE_messagebox AND TARGET Qt::Widgets)
+if(QT_FEATURE_dialogbuttonbox AND QT_FEATURE_inputdialog AND QT_FEATURE_menu AND QT_FEATURE_messagebox AND TARGET Qt::Widgets AND TARGET Qt::Xml)
     add_subdirectory(qdbusviewer)
 endif()
